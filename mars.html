<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="utf-8" />
		<title>Mars 1K - Three.js</title>
		<style>
			body {
				margin: 0;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas"></canvas>

		<script type="importmap">
			{
				"imports": {
					"three": "https://unpkg.com/three@0.160.0/build/three.module.js",
					"three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
				}
			}
		</script>
		<script type="module">
			import * as THREE from "three";
			import { OrbitControls } from "three/addons/controls/OrbitControls.js";
			const renderer = new THREE.WebGLRenderer({
				canvas: document.getElementById("canvas"),
			});
			renderer.setSize(window.innerWidth, window.innerHeight);
			renderer.setPixelRatio(window.devicePixelRatio);

			const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera(
				45,
				window.innerWidth / window.innerHeight,
				0.1,
				100
			);
			camera.position.set(0, 0, 3);

			const controls = new OrbitControls(camera, renderer.domElement);
			controls.enableDamping = true;
			controls.autoRotate = true;
			controls.autoRotateSpeed = 0.5;

			scene.add(new THREE.AmbientLight(0xffffff, 0.2));
			const light = new THREE.DirectionalLight(0xffffff, 1);
			light.position.set(3, 2, 1);
			scene.add(light);

			const loader = new THREE.TextureLoader();
			const color = loader.load("textures/mars/mars_8k_color.jpg");
			const bump = loader.load("textures/mars/mars_8k_bump.jpg");
			const normal = loader.load("textures/mars/mars_1k_normal.jpg");

			const material = new THREE.MeshStandardMaterial({
				map: color,
				bumpMap: bump,
				bumpScale: 0.05,
				normalMap: normal,
				normalScale: new THREE.Vector2(1, 1),
				roughness: 1,
			});

			const geometry = new THREE.SphereGeometry(1, 64, 64);
			const mars = new THREE.Mesh(geometry, material);
			scene.add(mars);

			function animate() {
				requestAnimationFrame(animate);
				controls.update();
				renderer.render(scene, camera);
			}
			animate();

			window.addEventListener("resize", () => {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			});
		</script>
	</body>
</html>
